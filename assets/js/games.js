document.addEventListener("DOMContentLoaded", function () {
  const urlParams = new URLSearchParams(window.location.search);
  const categoryParam = urlParams.get("c");

  const gamesWrapper = document.getElementById("games-wrapper");
  const gameNames = [
    "1",
    "10-minutes-till-dawn",
    "100ng",
    "1v1lol",
    "2020-game",
    "2048-multitask",
    "2048",
    "8ball-billards-classic",
    "9007199254740992",
    "Doge-Miner",
    "Fullscreen-Mario",
    "HexGL",
    "OfflineParadise",
    "Squid-Gun-Fest",
    "Stickman-Survival",
    "a-dark-room",
    "achievement-unlocked",
    "adrenaline-challenge",
    "age-of-war",
    "alien-hominid",
    "alien-invaders-io",
    "align-4",
    "among-us",
    "angry-birds",
    "anti-terrorist-rush",
    "arcade-wizard",
    "ascii-space",
    "aspiring-artist",
    "asteroids",
    "astray",
    "avalanche",
    "awesome-tanks-2",
    "back-country",
    "backflip-dive-3d",
    "backrooms",
    "bad-ice-cream-2",
    "bad-ice-cream-3",
    "bad-ice-cream",
    "baldis-basics",
    "basket-bros-io",
    "basketball-io",
    "basketball-legends-2020",
    "basketball-stars",
    "battle-for-gondor",
    "big-red-button",
    "binding-of-isaac",
    "bitlife",
    "black-hole-square",
    "black-knight",
    "blocky-snakes",
    "bloons-td",
    "bloons-td-2",
    "bloxorz",
    "bounce-back",
    "boxel-rebound",
    "boxhead2play",
    "brave-explorers",
    "breaking-the-bank",
    "breaklock",
    "breakout",
    "bloons-td-4",
    "big-tower-tiny-square",
    "burning-man-2",
    "cannon-basketball-4",
    "canyon-defense",
    "captain-callisto",
    "cars-simulator",
    "cell-machine",
    "champion-archer",
    "chess",
    "chill-radio",
    "chroma-incident",
    "chrome-dino",
    "circlo",
    "city-blocks-2",
    "clean-up-io",
    "cluster-rush",
    "color-switch-2-challenges",
    "connect3",
    "cookie-clicker",
    "core-ball",
    "craftmine",
    "creative-kill-chamber",
    "crossy-road",
    "crowd-city-2",
    "csgo-clicker",
    "cut-the-rope-holiday",
    "cut-the-rope-time-travel",
    "cut-the-rope",
    "cubefield",
    "cupcake-2048",
    "dadish",
    "dadish-3",
    "dadish-2",
    "dante",
    "deal-or-no-deal",
    "death-run-3d",
    "death-soul",
    "death-run",
    "defend-the-tank",
    "dino",
    "doctor-acorn-2",
    "dodge",
    "doge-miner-2",
    "doge-mining-simulator",
    "doge-2048",
    "dont-drop-the-white-ball-2",
    "doodle-jump",
    "double-wires",
    "douchebag-workout-2",
    "dragon-vs-bricks",
    "draw-the-hill",
    "drive-mad",
    "duck-life-treasure-hunt",
    "duck-life-1",
    "duck-life-2",
    "duck-life-3",
    "duck-life-4",
    "duke-dashington-remastered",
    "dungeon-craft",
    "edge-surf",
    "edge-not-found",
    "elastic-face",
    "elastic-man",
    "emulator-js",
    "endlesswar3",
    "escaping-the-prison",
    "evil-glitch",
    "evolution",
    "exo",
    "factory-balls-forever",
    "factory-balls",
    "fake-virus",
    "fancy-pants-adventures",
    "fireboy-and-watergirl",
    "finns-fantastic-food-machine",
    "fireboy-and-watergirl-forest-temple",
    "a-dance-of-fire-and-ice",
    "flappy-2048",
    "flappy-bird",
    "flappy-defense",
    "flash-tetris",
    "flippy-fish",
    "flood-runner-2",
    "friday-night-funkin",
    "friendly-fire",
    "froggys-battle",
    "fruit-ninja",
    "frying-nemo",
    "game-inside-a-game",
    "generic-fishing-game",
    "geometry-dash-knockoff",
    "geometry-dash-scratch",
    "geometry-jump-sketchy",
    "george-and-the-printer",
    //Stopping Point
    "getaway-shootout",
    "getting-over-it",
    "gimme-the-airpod",
    "glass-city",
    "go-ball",
    "golf",
    "goodnight",
    "google-snake",
    "google-solitaire",
    "gopher",
    "gravity-soccer",
    "green",
    "grey-box",
    "grindcraft",
    "grow-in-the-hole",
    "gun-mayhem-2",
    "gun-mayhem-redux",
    "gun-mayhem",
    "gun-spin",
    "hacker-typer",
    "happy-hop",
    "happy-wheels",
    "hover-bot-arena",
    "helicopter",
    "helios",
    "hex-empire",
    "hextris",
    "house-of-hazards",
    "icys-purple-head",
    "idle-breakout",
    "idle-shark",
    "impossible-quiz",
    "interactive-buddy",
    "jelly-truck",
    "jetpack",
    "jimothy-piggerton",
    "just-one-boss",
    "justfall",
    "kart-fight-io",
    "kitchen-gun-game",
    "kitten-cannon",
    "klocki",
    "konnekt",
    "krunker",
    "learn-to-fly",
    "learn-to-fly-2",
    "line-rider",
    "linquest",
    "madalin-stunt-cars-2",
    "madalin-stunt-cars-3",
    "make-it-meme",
    "mario",
    "marvin-spectrum",
    "matrix-rampage",
    "minecraft-1.5.2",
    "minecraft-beta-0.30",
    "minecraft-beta-1.3",
    "meat-boy",
    "meme-2048",
    "minesweeper",
    "mini-stilts",
    "miniputt",
    "missiles",
    "moto-x3m-pool",
    "moto-x3m-spooky",
    "moto-x3m-winter",
    "moto-x3m-2",
    "my-friend-pedro",
    "n-gon",
    "ninja",
    "ninja-vs-evil-corp",
    "ns-shaft",
    "om-nom-bounce",
    "one-screen-run-2",
    "one-screen-run",
    "osu",
    "ovo",
    "packabunchas",
    "pacman-fps",
    "pacman",
    "pandemic-2",
    "papa-louie",
    "papas-freezeria",
    "papas-hot-doggeria",
    "papas-pancakeria",
    "papas-sushiria",
    "papas-wingeria",
    "papas-burgeria",
    "papas-pizzaria",
    "paper-io-2",
    "papery-planes",
    "particle-clicker",
    "particleclicker",
    "path-finder",
    "pe-noire",
    "pikwip",
    "pixel-cave",
    "pizzeria-simulator",
    "polybranch",
    "popcat-classic",
    "portal-flash",
    "precision-client",
    "protektor",
    "push-the-square",
    "push-your-luck",
    "pushback",
    "puzzle-ball",
    "plants-vs-zombies-2",
    "q1k3",
    "racer",
    "radius-raid",
    "retro-bowl",
    "retro-haunt",
    "rise-of-neon-square",
    "roadblocks",
    "rocking-sky-trip",
    "rolling-forests",
    "rolly-vortex",
    "rooftop-snipers",
    "sand-game",
    "sandboxels",
    "scrambled-eggs",
    "scrapmetal",
    "senya-and-oscar-2",
    "shadow-world-adventure",
    "shards",
    "shift-flash-2",
    "shift-flash",
    "short-life-2",
    "short-ride",
    "shuttledeck",
    "skyblock",
    "sleeping-beauty",
    "slice-of-sasha",
    "slither snake",
    "slither",
    "slope-ball",
    "slope",
    "slope-2",
    "super-mario-63",
    "super-mario-64",
    "smash-karts",
    "smokingbarrels",
    "snake",
    "snowbattle",
    "soldier-legend",
    "solitaire",
    "sonic-the-hedgehog",
    "sort-the-court",
    "soundboard",
    "space-company",
    "space-garden",
    "space-huggers",
    "spelunky",
    "super-smash-flash",
    "stack-bump-3d",
    "stack",
    "station-141",
    "stealing-the-diamond",
    "stick-archers-battle",
    "stick-climb",
    "stickman-boost",
    "stickman-dismount",
    "stickman-epic-battle",
    "stickman-golf",
    "stickman",
    "stick-war",
    "storm-the-house-2",
    "subway-surfers-bali",
    "subway-surfers",
    "super-mario-maker-online",
    "super-puffer-fish-3d",
    "superhero-io",
    "superhot",
    "swerve",
    "synesthesia",
    "tactical-weapon-pack-2",
    "tactical-assasin-2",
    "tail-of-the-dragon",
    "tam-indian-truck-simulator-3d",
    "tank-trouble-2",
    "tanuki-sunset",
    "temple-run-2",
    "tetris",
    "the-final-earth-2",
    "the-final-earth",
    "the-impossible-quiz-2",
    "the-impossible-quiz",
    "the-little-giant",
    "the-battle",
    "the-heist",
    "the-maze-of-space-goblins",
    "there-is-no-game",
    "this-is-the-only-level",
    "time-shooter-3",
    "tiny-fishing",
    "tiny-fragments",
    "tiny-islands",
    "topple-adventure",
    "toss-the-turtle",
    "tough-growth",
    "tower-master",
    "townscaper",
    "trimps",
    "tube-jumpers",
    "tunnel-rush",
    "tunnelz",
    "tv-static",
    "twitch-tetris",
    "underrun",
    "unfold-2",
    "up-left-out",
    "veloce",
    "vex-3",
    "vex-4",
    "vex-5",
    "vex-6",
    "vex-7",
    "waterworks",
    "webretro",
    "winter-falling-price",
    "wipo",
    "wolf3d",
    "wordle",
    "worlds-hardest-game-2",
    "worlds-hardest-game",
    "x-trial-racing",
    "xx142-b2exe",
    "yoshi-fabrication",
    "you-are-bezos",
    "zig-zag",
    "zombocalypse",
    "zombs-royale",
  ];

  const categories = {
    papas: [
      "papas-pizzaria",
      "papas-freezeria",
      "papas-hot-doggeria",
      "papas-pancakeria",
      "papas-sushiria",
      "papas-wingeria"
    ],
    minecraft: [
      "minecraft-1.3",
      "minecraft-1.5.2",
      "minecraft-beta-0.30"
    ],
    twentyfortyeight: [
      "1",
      "9007199254740992",
      "2048-multitask",
      "2048",
      "cupcake-2048",
      "doge-2048",
      "flappy-2048",
      "meme-2048"
    ],
    mario: [
      "fullscreen-mario",
      "mario",
      "super-mario-63",
      "super-mario-64",
      "super-mario-maker-online"
    ]
  }

  function toTitleCase(str) {
    return str.replace(/\b\w+/g, function (txt) {
      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
  }
  if (categoryParam) {
    categories[categoryParam].forEach(function (gameName) {
      const gameImg = `../images/games/${gameName}.png`;
      const gameLink = `display.html?g=${gameName}`;

      const gameBox = document.createElement("div");
      gameBox.classList.add("game-box");
      gameBox.style.backgroundImage = `url('${gameImg}')`;

      const gameText = document.createElement("span");
      gameText.textContent = toTitleCase(gameName.replace(/-/g, " ")); // Convert to title case and replace dashes with spaces
      gameBox.appendChild(gameText);

      gameBox.addEventListener("click", function () {
        window.location.href = gameLink;
      });

      gamesWrapper.appendChild(gameBox);

      document
        .getElementById("searchInput")
        .addEventListener("input", function () {
          const filterValue = this.value.toLowerCase();

          document.querySelectorAll(".game-box").forEach(function (gameBox) {
            const gameText = gameBox.textContent.toLowerCase();
            if (gameText.includes(filterValue)) {
              gameBox.style.display = "block";
            } else {
              gameBox.style.display = "none";
            }
          });
        });
    });
  } else {
    gameNames.forEach(function (gameName) {
      const gameImg = `../images/games/${gameName}.png`;
      const gameLink = `display.html?g=${gameName}`;

      const gameBox = document.createElement("div");
      gameBox.classList.add("game-box");
      gameBox.style.backgroundImage = `url('${gameImg}')`;

      const gameText = document.createElement("span");
      gameText.textContent = toTitleCase(gameName.replace(/-/g, " ")); // Convert to title case and replace dashes with spaces
      gameBox.appendChild(gameText);

      gameBox.addEventListener("click", function () {
        window.location.href = gameLink;
      });

      gamesWrapper.appendChild(gameBox);

      document
        .getElementById("searchInput")
        .addEventListener("input", function () {
          const filterValue = this.value.toLowerCase();

          document.querySelectorAll(".game-box").forEach(function (gameBox) {
            const gameText = gameBox.textContent.toLowerCase();
            if (gameText.includes(filterValue)) {
              gameBox.style.display = "block";
            } else {
              gameBox.style.display = "none";
            }
          });
        });
    });
  }
});

//Created by ChatGPT
